@model Grand.Plugin.Misc.AppointmentBooking.Models.BookAppointmentDto
@{ Layout = "_ColumnsTwo"; }


<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
<div class="row col-md-14">
    <div class="col-md-12">
        <div class="x_panel light form-fit">
            <div class="x_title">
                <div class="caption">
                    <i class="fa fa-cube">Book Appointment</i>
                </div>
            </div>
            <div class="k-widget k-header k-tabstrip k-floatwrap k-tabstrip-left mt-3">
                <div class="k-content k-state-active d-block bg-light">
                    <form asp-controller="AppointmentBooking" asp-action="SaveAppointment" method="post">
                        <div class="form-horizontal">
                            <div class="form-body">
                                <div class="form-group">
                                    <div class="x_content form">
                                        <div class="row">
                                            <div class="col-lg-12 col-md-12 col-xs-12">
                                                <div class="d-flex flex-wrap align-items-center">
                                                    <div class="search-icon mr-2 col">
                                                        <label>Customer Name</label>
                                                        <input readonly id="patientsdetails" class="form-control" style="width:60%" asp-for=@Model.CustomerName >
                                                        <label>Customer Id</label>
                                                        <input readonly id="patientsId" class="form-control" style="width:30%" asp-for=@Model.CustomerId >
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="border d-flex p3 p-2 border-warning">
                                    <div class="col-md-3">
                                        <label>Choose Date :</label>
                                        <div class="input-group">
                                            <input type="date" id="Date" asp-for=@Model.AppointmentDate />
                                        </div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-sm-6">
                                        <div class="row">
                                            <div class="form-group col-sm-3">
                                                <label class="control-label">Age :</label>
                                                <input type="number" id="Age"  class="form-control k-input text-box single-line" asp-for="Age"/>
                                            </div>
                                            <div class="form-group col-sm-3">
                                                <label class="control-label">Blood Pressure :</label>
                                                <input type="text" id="BloodPressure"  class="form-control k-input text-box single-line" asp-for="BloodPressure" />
                                            </div>
                                            <div class="form-group col-sm-3">
                                                <label class="control-label">Temperature :</label>
                                                <input type="text" id="Temperature"  class="form-control k-input text-box single-line"  asp-for="Temperature" />
                                            </div>
                                            <div class="form-group col-sm-3">
                                                <label class="control-label">Weight :</label>
                                                <input type="text" id="Weight" class="form-control k-input text-box single-line" asp-for="Weight"  />
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="form-row">
                                    <div class="form-group col-sm-6">
                                        <div class="row">
                                            <div class="form-group col-sm-4">
                                                <label class="label-title">Vaccine:</label>
                                                <select id="vaccine" asp-for="VaccineName" class="form-control">
                                                    <option value="-1">Select Vaccine</option>
                                                    <option value="@Model.VaccineId">CoviShield</option>
                                                    <option value="@Model.VaccineId">VeroCell</option>
                                                    <option value="@Model.VaccineId">Janssen</option>
                                                </select>
                                            </div>
                                            <div class="form-group col-sm-4">
                                                <label class="label-title">Doze Status:</label>
                                                <select id="doze"  asp-for=@Model.Doze class="form-control">
                                                    <option value="-1">Select Doze</option>
                                                    <option value="1">First</option>
                                                    <option value="2">Second</option>
                                                </select>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="form-group col-sm-6 pull-right">
                                        <label class="control-label">Remarks * :</label>
                                        <textarea type="textarea" id="DetailComplaints" name="SelectType" asp-for=@Model.Remarks class="form-control k-input text-box single-line" ></textarea>
                                    </div>
                                </div>
                                <div class="form-row align-items-center">
                                    <button class="btn pull-right green" id="createappointment" type="submit">Create Appointment</button>
                                </div>
                            </div>
                        </div>
                    </form>
                   
                </div>

            </div>
            <div>
            </div>
        </div>

    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
@*<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script>
    function Savedata() {
        let redirectUrl = '@(Url.Action("SaveAppointment", "AppointmentBooking"))';
        var Date = $("#Date").val();
        var CustomerId = $("#patientsId").val();
        var CustomerName = $("#patientsdetails").val();
        var Doze = $("#doze").val();
        var Vaccine = $("#vaccine").val();
        var Notes = $("#DetailComplaints").val();
        var Age = $("#Age").val();
        var BloodPressure = $("#BloodPressure").val();
        var Temperature = $("#Temperature").val();
        var Weight = $("#Weight").val();

        var model = {
            AppointmentDate: Date,
            CustomerId: CustomerId,
            VaccineId: Vaccine,
            Doze: Doze,
            Remarks: Notes,
            Age: Age,
            BloodPressure: BloodPressure,
            Temperature: Temperature,
            Weight: Weight,
            CustomerName : CustomerName
        };
        if (Date == "" || Date == null) {
            alert("Select Date!");

        }

        else if (Doze == "-1" || Doze == null) {
            alert("Choose Doze");
        }
        else if (Vaccine == "-1" || Vaccine == null) {
            alert("Choose Vaccine");
        }
        else {
            $.ajax({
                type: "POST",
                url: "/AppointmentBooking/SaveAppointment",
                data: JSON.stringify(model),
                contentType: "application/json;",
                dataType: 'json',
                success: (result) => {
                    if (result == "1") {
                        alert(" Failed with result ==1", "Error");
                    }
                    else {
                        window.location.replace(redirectUrl);
                    }

                },
                error: () => {
                    alert(" Failed", "Error");
                }
            });
        }

    }
</script>*@




